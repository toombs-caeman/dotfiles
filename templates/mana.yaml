# imbue config
#
# path relative to this file where the source files are found
source: .

# used to detect which os is running
# nushell boolean expression fragments
detect:
  win: which winget | is-not-empty
  nix: which pacman | is-not-empty
  mac: which brew | is-not-empty

# used to install packages as needed
# nushell fragment run with nu -c
install:
  mac: brew install
  win: winget install
  nix: sudo pacman -S --needed --noconfirm

template:
  nu: # shell https://www.nushell.sh/
    files:
      config.nu:
        nix: ~/.config/nushell/config.nu
        win: ~/AppData/Roaming/nushell/config.nu
  wezterm: # terminal https://wezterm.org/
    files:
      wezterm.lua: ~/.config/wezterm/wezterm.lua
    package: wezterm
    # no callback, reloads config live
  nvim: # editor https://neovim.io/
    package: neovim
    files:
      vim.init.lua:
        win: ~/AppData/Local/nvim/init.lua
        nix: ~/.config/nvim/init.lua
        mac: ~/.config/nvim/init.lua
  fzf:
    package: fzf
  mpc:
    files:
      mpd.conf:
        nix: ~/.mpdconf
  git:
    files:
      gitconfig: ~/.gitconfig
  sway:
    files:
      waybar.jsonc:
        nix: ~/.config/waybar/config.jsonc
      waybar.css:
        nix: ~/.config/waybar/style.css
      sway.config:
        nix: ~/.config/sway/config
    callback: swaymsg reload; killall -SIGUSR2 waybar
