#!/bin/bash
# do a file search with fzf from the root of a git repo
# search within a file with extra parameters
GITROOT=$(git rev-parse --show-toplevel) || exit $?
cd $GITROOT
if [ -z "$1" ]; then
    SEL=$(git ls-files | fzf) || exit $?
else
    SEL=$(cd "$(git root)"; rg "$*" | fzf | cut -f1 -d":") || exit $?
fi
realpath $SEL
